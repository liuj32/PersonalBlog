<script>
    function TreeNode(val, left, right, next) {
        this.val = (val===undefined ? 0 : val)
        this.left = (left===undefined ? null : left)
        this.right = (right===undefined ? null : right)
        this.next = next === undefined ? null : next;
    }
    
   var root = new TreeNode(1)
   root.left = new TreeNode(2)
   root.right = new TreeNode(3)
    
var connect = function(root) {
  if (!root) {
    return
  }
  var stack = []
  stack.push(root)
  while(stack.length) {
    var levelSize = stack.length
    var curLevelHead = stack.shift()
    if (node.left) {
        stack.push(left)
      }
      if (node.right) {
        stack.push(right)
      }    
    for(var i=0;i<levelSize-1;i++) {
      var node = stack.shift()
      curLevelHead.next = node
      curLevelHead = curLevelHead.next
      if (node.left) {
        stack.push(left)
      }
      if (node.right) {
        stack.push(right)
      }      
    }
    curLevelHead.next = null
  }

  return root
};   

var res = connect(root)
console.log(res)
</script>