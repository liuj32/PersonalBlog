<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div class="box"></div>
  <script>
  function TreeNode(val) {
      this.val = val;
      this.left = this.right = null;
  }    

  var root = new TreeNode(1)
  var left = new TreeNode(2)
  var right = new  TreeNode(3)
  right.left = new TreeNode(4)
  right.right = new TreeNode(5)
  root.right = right
  root.left = left
  
    var serialize = function(root) {
    if (root == null) {
        return "[]"
    }
    var stack = [], res = []
    var depth = maxDepth(root)
    stack.push({level: 0, node: root})
    while(stack.length) {
        var { level, node } = stack.shift()
        if (level == depth) {
            break;
        }
        if (node == null) {
            res.push(null)
        } else {
            res.push(node.val)
            stack.push({level: level+1, node: node.left})
            stack.push({level: level+1, node: node.right})
        }    

    }

    return JSON.stringify(res)
};

function maxDepth(root) {
    if (root == null) {
        return 0
    }
    var leftDepth = maxDepth(root.left)
    var rightDepth = maxDepth(root.right)

    return 1 + Math.max(leftDepth, rightDepth)
};

var res =  serialize(root)
console.log(res)

var str = "[1,2,3,null,null,4,5]"
console.log(str.slice(1, -1).split(','))

  </script>
</body>
</html>