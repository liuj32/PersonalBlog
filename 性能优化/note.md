# 性能优化
参考链接：
1. http://blog.cnbang.net/tech/3477/
2. https://live.juejin.cn/4354/xdc2021-15

## 一、美团性能优化实践
### RN
优化重点措施：RN框架优化、网络请求优化、视图渲染优化
1. RN框架优化: 
  预加载
    提前加载基础bundle、业务bundle
    优化：控制同时预加载的数量，减少对内存的使用、结合业务场景，用户画像智能预加载，提高预加载命中率
  CodeCache
    引擎复用时，js引擎可以复用同一脚本的编译结果，从而跳过编译过程。但当引擎被销毁时，编译结果也随之消失。
    CodeCache的体积约为原bundle的1.8倍，使用LRU控制CodeCache体积大小
  bundle体积优化:(包体积减少)
    Tree Sharking：裁剪Dead code
    按需加载打包：抽取公共模块，提高代码复用率、重构基础工具类库，支持按需加载打包
  懒加载
    首屏不需要的文件，在需要的时候再去加载(inlineRequire，不能解决解析和编译的时间)

2. 网络请求优化
  请求前置(...)：路由跳转 ->逻 执行业务辑 -> 发起请求(是否能利用缓存数据)
                        -> 读取bundle配置文件 -> 发起请求 -> 缓存请求结果
3. 视图渲染优化
容器创建->业务包下载&解压->创建初始化引擎->业务包加载->业务包运行->业务初始化->首要素渲染->网络请求->首屏渲染(分部渲染(首屏优先渲染)、部分优化)

### H5
过程：webview初始化 -> 建立握手ssl -> 解析html -> 构建渲染树 -> 渲染页面 -> 完全加载
优化重点措施：资源优化、网络请求优化、渲染优化。
1. 资源优化：
  * 离线化原理：将前端所需资源打包成离线包下发至APP，webview请求资源时优先从离线包中获取数据。
  * 预加载：预创建webview,并加载预置页面，该页面使用了公共资源。用户点击进入web页面时，直接用预创建的webview加载业务页面，从而达到复用资源，减少资源请求、解析耗时的目的。
  end：场景: 资源较多，网速较差

2. 网络请求优化
  * 求前置
  end：场景: 请求耗时
3. 渲染优化
  * 预渲染
  end：场景: 静态页面

--------------------------------------------------------
## 其他、移动 H5 首屏秒开优化方案探讨
> 参考连接
* http://blog.cnbang.net/tech/3477/
web开发模式的诸多好处：跨平台、动态更新、减体积、无线扩展
怎样减少白屏时间？
初始化 webview -> 请求页面 -> 下载数据 -> 解析HTML -> 请求 js/css 资源 -> dom 渲染(之前都是白屏) -> 解析 JS 执行 -> JS 请求数据 -> 解析渲染 -> 下载渲染图片(页面完整显示)
前端优化：
  1. 降低请求量：合并资源，减少 HTTP 请求数，minify / gzip 压缩，webP，lazyLoad。
  2. 加快请求速度：预解析DNS，减少域名数，并行加载，CDN 分发。
  3. 缓存：HTTP 协议缓存请求，离线缓存 manifest，离线数据缓存localStorage。
  4. 渲染：JS/CSS优化，加载顺序，服务端渲染，pipeline。
客户端优化：
  1. html缓存
  2. 离线包
  3. 更多优化：公共资源包、预加载 webview、预加载数据、Fallback、使用客户端接口、服务端渲染。
  4. 
--------------------------------------------------------
## 二、百度性能优化实践
